(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lCCV:function(e,t,n){"use strict";n.r(t),n.d(t,"TodoModule",(function(){return j}));var s=n("ofXK"),i=n("tyNb"),o=n("XNiG"),c=n("Kj3r"),r=n("fXoL"),b=n("vjhR"),d=n("CcaC"),a=n("N2Qi"),l=n("3Pt+"),u=n("lJxs");let f=(()=>{class e{constructor(t){this.db=t,e.users$||(e.users$=this.db.collection("users").values())}transform(t){return e.users$.pipe(Object(u.a)(e=>e.find(e=>e.id===t)))}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(b.c))},e.\u0275pipe=r.Ib({name:"mapUser",type:e,pure:!0}),e})();function p(e,t){if(1&e&&(r.Nb(0),r.sc(1," Assigned to "),r.Pb(2,"b"),r.sc(3),r.Ob(),r.Kb(4,"br"),r.Mb()),2&e){const e=t.ngIf;r.zb(3),r.tc(e.username)}}function m(e,t){if(1&e){const e=r.Qb();r.Nb(0),r.Pb(1,"m4-slider",14),r.Xb("ngModelChange",(function(t){r.jc(e);const n=r.Zb(2).$implicit;return r.Zb().changeProgressSubject$.next([n,t])})),r.Ob(),r.Mb()}if(2&e){const e=r.Zb(2).$implicit;r.zb(1),r.fc("ngModel",e.progress)("max",100)("min",0)}}function g(e,t){if(1&e&&(r.Pb(0,"div",15),r.Kb(1,"m4-progress",16),r.Ob()),2&e){const e=r.Zb(2).$implicit;r.zb(1),r.fc("value",e.progress)}}function v(e,t){if(1&e&&(r.Nb(0),r.qc(1,m,2,3,"ng-container",12),r.qc(2,g,2,1,"ng-template",null,13,r.rc),r.Mb()),2&e){const e=t.ngIf,n=r.ic(3),s=r.Zb().$implicit;r.zb(1),r.fc("ngIf",s.assignedToId===e.id)("ngIfElse",n)}}function h(e,t){if(1&e&&(r.Pb(0,"div",5),r.Pb(1,"div",6),r.Pb(2,"div",7),r.sc(3),r.Ob(),r.Pb(4,"div",8),r.Pb(5,"p"),r.sc(6),r.Kb(7,"br"),r.sc(8),r.ac(9,"date"),r.Kb(10,"br"),r.qc(11,p,5,1,"ng-container",9),r.ac(12,"async"),r.ac(13,"mapUser"),r.Ob(),r.Ob(),r.Pb(14,"div",10),r.Pb(15,"div",11),r.Pb(16,"div",2),r.sc(17," Progress "),r.qc(18,v,4,2,"ng-container",9),r.ac(19,"async"),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e){const e=t.$implicit,n=r.Zb();r.zb(3),r.tc(e.title),r.zb(3),r.uc(" Description: ",e.description,""),r.zb(2),r.uc(" Due date: ",r.bc(9,5,e.dueDate),""),r.zb(3),r.fc("ngIf",r.bc(12,7,r.bc(13,9,e.assignedToId))),r.zb(7),r.fc("ngIf",r.bc(19,11,n.userService.currentUser$))}}let O=(()=>{class e{constructor(e,t){this.db=e,this.userService=t,this.changeProgressSubject$=new o.a,this.todoCollection=this.db.collection("todoItems"),this.todoItems$=this.todoCollection.values(),this.changeProgressSubject$.pipe(Object(c.a)(200)).subscribe(([e,t])=>{this.todoCollection.update(Object.assign(Object.assign({},e),{progress:t}))})}ngOnInit(){}ngOnDestroy(){var e;null===(e=this.changeProgressSubscription)||void 0===e||e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(b.c),r.Jb(d.a))},e.\u0275cmp=r.Db({type:e,selectors:[["app-list"]],decls:9,vars:3,consts:[[1,"row"],["class","cell-md-3",4,"ngFor","ngForOf"],[1,"cell-12"],["m4-button","","btn-style","success","routerLink","../add"],[1,"mif-plus"],[1,"cell-md-3"],[1,"card"],[1,"card-header","text-bold","bg-blue","fg-white"],[1,"card-content","p-2"],[4,"ngIf"],[1,"card-footer"],[1,"row","w-100"],[4,"ngIf","ngIfElse"],["noEditPossible",""],[3,"ngModel","max","min","ngModelChange"],[1,"mt-3","mb-3"],[3,"value"]],template:function(e,t){1&e&&(r.Pb(0,"h1"),r.sc(1,"Todo items"),r.Ob(),r.Pb(2,"div",0),r.qc(3,h,20,13,"div",1),r.ac(4,"async"),r.Pb(5,"div",2),r.Pb(6,"button",3),r.Kb(7,"span",4),r.sc(8," Add todo item"),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.zb(3),r.fc("ngForOf",r.bc(4,1,t.todoItems$)))},directives:[s.k,a.a,i.c,s.l,a.g,l.i,l.k,a.e],pipes:[s.b,s.e,f],styles:[""]}),e})();var P=n("wd/R");function I(e,t){if(1&e&&(r.Pb(0,"option",10),r.sc(1),r.Ob()),2&e){const e=t.$implicit;r.fc("value",e.id),r.zb(1),r.tc(e.username)}}function w(e,t){if(1&e&&(r.Pb(0,"m4-select",8),r.qc(1,I,2,2,"option",9),r.Ob()),2&e){const e=t.ngIf;r.zb(1),r.fc("ngForOf",e)}}const y=[{path:"list",component:O},{path:"add",component:(()=>{class e{constructor(e,t){this.db=e,this.router=t,this.form=new l.e({title:new l.b(void 0,[l.n.required]),description:new l.b(void 0),assignedToId:new l.b(void 0,[l.n.required]),dueDate:new l.b(P(),[l.n.required])}),this.users$=this.db.collection("users").values()}ngOnInit(){}save(){const e=this.form.value;this.db.collection("todoItems").add(e).subscribe(e=>{if(e.results[0].error)return void alert("Error");const t=e.results[0].validationResults;if(t){const e=Object.keys(t).map(e=>[e,t[e]]).map(([e,t])=>`${e}: ${t.join(",")}`).join(",\n");alert(e)}else this.router.navigateByUrl("/todo/list")})}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(b.c),r.Jb(i.b))},e.\u0275cmp=r.Db({type:e,selectors:[["app-add"]],decls:15,vars:5,consts:[[1,"row",3,"formGroup"],[1,"cell-12","pb-2"],["prepend","Title","formControlName","title"],["prepend","Description","formControlName","description"],["prepend","Assigned to","formControlName","assignedToId",4,"ngIf"],["formControlName","dueDate"],[1,"cell-12"],["m4-button","","btn-style","success",3,"disabled","click"],["prepend","Assigned to","formControlName","assignedToId"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.Pb(0,"h1"),r.sc(1,"Add todo item"),r.Ob(),r.Pb(2,"div",0),r.Pb(3,"div",1),r.Kb(4,"m4-input",2),r.Ob(),r.Pb(5,"div",1),r.Kb(6,"m4-textarea",3),r.Ob(),r.Pb(7,"div",1),r.qc(8,w,2,1,"m4-select",4),r.ac(9,"async"),r.Ob(),r.Pb(10,"div",1),r.Kb(11,"m4-date-picker",5),r.Ob(),r.Pb(12,"div",6),r.Pb(13,"button",7),r.Xb("click",(function(){return t.save()})),r.sc(14,"Create"),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.zb(2),r.fc("formGroup",t.form),r.zb(6),r.fc("ngIf",r.bc(9,3,t.users$)),r.zb(5),r.fc("disabled",t.form.invalid||t.form.pristine))},directives:[l.j,l.f,a.c,l.i,l.d,a.h,s.l,a.b,a.a,a.f,s.k,l.l,l.o],pipes:[s.b],styles:[""]}),e})()},{path:"**",pathMatch:"full",redirectTo:"list"}];let $=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[i.e.forChild(y)],i.e]}),e})(),j=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[s.c,$,a.d]]}),e})()}}]);