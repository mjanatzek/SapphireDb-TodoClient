function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var c,s=e[Symbol.iterator]();!(n=(c=s.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(a){i=!0,o=a}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lCCV:function(e,t,r){"use strict";r.r(t),r.d(t,"TodoModule",(function(){return $}));var n,i=r("ofXK"),o=r("tyNb"),c=r("XNiG"),s=r("Kj3r"),a=r("fXoL"),b=r("vjhR"),l=r("CcaC"),u=r("N2Qi"),d=r("3Pt+"),f=r("lJxs"),p=((n=function(){function e(t){_classCallCheck(this,e),this.db=t,e.users$||(e.users$=this.db.collection("users").values())}return _createClass(e,[{key:"transform",value:function(t){return e.users$.pipe(Object(f.a)((function(e){return e.find((function(e){return e.id===t}))})))}}]),e}()).\u0275fac=function(e){return new(e||n)(a.Jb(b.c))},n.\u0275pipe=a.Ib({name:"mapUser",type:n,pure:!0}),n);function m(e,t){if(1&e&&(a.Nb(0),a.sc(1," Assigned to "),a.Pb(2,"b"),a.sc(3),a.Ob(),a.Kb(4,"br"),a.Mb()),2&e){var r=t.ngIf;a.zb(3),a.tc(r.username)}}function v(e,t){if(1&e){var r=a.Qb();a.Nb(0),a.Pb(1,"m4-slider",14),a.Xb("ngModelChange",(function(e){a.jc(r);var t=a.Zb(2).$implicit;return a.Zb().changeProgressSubject$.next([t,e])})),a.Ob(),a.Mb()}if(2&e){var n=a.Zb(2).$implicit;a.zb(1),a.fc("ngModel",n.progress)("max",100)("min",0)}}function g(e,t){if(1&e&&(a.Pb(0,"div",15),a.Kb(1,"m4-progress",16),a.Ob()),2&e){var r=a.Zb(2).$implicit;a.zb(1),a.fc("value",r.progress)}}function h(e,t){if(1&e&&(a.Nb(0),a.qc(1,v,2,3,"ng-container",12),a.qc(2,g,2,1,"ng-template",null,13,a.rc),a.Mb()),2&e){var r=t.ngIf,n=a.ic(3),i=a.Zb().$implicit;a.zb(1),a.fc("ngIf",i.assignedToId===r.id)("ngIfElse",n)}}function y(e,t){if(1&e&&(a.Pb(0,"div",5),a.Pb(1,"div",6),a.Pb(2,"div",7),a.sc(3),a.Ob(),a.Pb(4,"div",8),a.Pb(5,"p"),a.sc(6),a.Kb(7,"br"),a.sc(8),a.ac(9,"date"),a.Kb(10,"br"),a.qc(11,m,5,1,"ng-container",9),a.ac(12,"async"),a.ac(13,"mapUser"),a.Ob(),a.Ob(),a.Pb(14,"div",10),a.Pb(15,"div",11),a.Pb(16,"div",2),a.sc(17," Progress "),a.qc(18,h,4,2,"ng-container",9),a.ac(19,"async"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&e){var r=t.$implicit,n=a.Zb();a.zb(3),a.tc(r.title),a.zb(3),a.uc(" Description: ",r.description,""),a.zb(2),a.uc(" Due date: ",a.bc(9,5,r.dueDate),""),a.zb(3),a.fc("ngIf",a.bc(12,7,a.bc(13,9,r.assignedToId))),a.zb(7),a.fc("ngIf",a.bc(19,11,n.userService.currentUser$))}}var O,P=((O=function(){function e(t,r){var n=this;_classCallCheck(this,e),this.db=t,this.userService=r,this.changeProgressSubject$=new c.a,this.todoCollection=this.db.collection("todoItems"),this.todoItems$=this.todoCollection.values(),this.changeProgressSubject$.pipe(Object(s.a)(200)).subscribe((function(e){var t=_slicedToArray(e,2),r=t[0],i=t[1];n.todoCollection.update(Object.assign(Object.assign({},r),{progress:i}))}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.changeProgressSubscription)||void 0===e||e.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||O)(a.Jb(b.c),a.Jb(l.a))},O.\u0275cmp=a.Db({type:O,selectors:[["app-list"]],decls:9,vars:3,consts:[[1,"row"],["class","cell-md-3",4,"ngFor","ngForOf"],[1,"cell-12"],["m4-button","","btn-style","success","routerLink","../add"],[1,"mif-plus"],[1,"cell-md-3"],[1,"card"],[1,"card-header","text-bold","bg-blue","fg-white"],[1,"card-content","p-2"],[4,"ngIf"],[1,"card-footer"],[1,"row","w-100"],[4,"ngIf","ngIfElse"],["noEditPossible",""],[3,"ngModel","max","min","ngModelChange"],[1,"mt-3","mb-3"],[3,"value"]],template:function(e,t){1&e&&(a.Pb(0,"h1"),a.sc(1,"Todo items"),a.Ob(),a.Pb(2,"div",0),a.qc(3,y,20,13,"div",1),a.ac(4,"async"),a.Pb(5,"div",2),a.Pb(6,"button",3),a.Kb(7,"span",4),a.sc(8," Add todo item"),a.Ob(),a.Ob(),a.Ob()),2&e&&(a.zb(3),a.fc("ngForOf",a.bc(4,1,t.todoItems$)))},directives:[i.k,u.a,o.c,i.l,u.g,d.i,d.k,u.e],pipes:[i.b,i.e,p],styles:[""]}),O),C=r("wd/R");function I(e,t){if(1&e&&(a.Pb(0,"option",10),a.sc(1),a.Ob()),2&e){var r=t.$implicit;a.fc("value",r.id),a.zb(1),a.tc(r.username)}}function w(e,t){if(1&e&&(a.Pb(0,"m4-select",8),a.qc(1,I,2,2,"option",9),a.Ob()),2&e){var r=t.ngIf;a.zb(1),a.fc("ngForOf",r)}}var _,k,j,A=[{path:"list",component:P},{path:"add",component:(_=function(){function e(t,r){_classCallCheck(this,e),this.db=t,this.router=r,this.form=new d.e({title:new d.b(void 0,[d.n.required]),description:new d.b(void 0),assignedToId:new d.b(void 0,[d.n.required]),dueDate:new d.b(C(),[d.n.required])}),this.users$=this.db.collection("users").values()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"save",value:function(){var e=this,t=this.form.value;this.db.collection("todoItems").add(t).subscribe((function(t){if(t.results[0].error)alert("Error");else{var r=t.results[0].validationResults;if(r){var n=Object.keys(r).map((function(e){return[e,r[e]]})).map((function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1];return"".concat(r,": ").concat(n.join(","))})).join(",\n");alert(n)}else e.router.navigateByUrl("/todo/list")}}))}}]),e}(),_.\u0275fac=function(e){return new(e||_)(a.Jb(b.c),a.Jb(o.b))},_.\u0275cmp=a.Db({type:_,selectors:[["app-add"]],decls:15,vars:5,consts:[[1,"row",3,"formGroup"],[1,"cell-12","pb-2"],["prepend","Title","formControlName","title"],["prepend","Description","formControlName","description"],["prepend","Assigned to","formControlName","assignedToId",4,"ngIf"],["formControlName","dueDate"],[1,"cell-12"],["m4-button","","btn-style","success",3,"disabled","click"],["prepend","Assigned to","formControlName","assignedToId"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(a.Pb(0,"h1"),a.sc(1,"Add todo item"),a.Ob(),a.Pb(2,"div",0),a.Pb(3,"div",1),a.Kb(4,"m4-input",2),a.Ob(),a.Pb(5,"div",1),a.Kb(6,"m4-textarea",3),a.Ob(),a.Pb(7,"div",1),a.qc(8,w,2,1,"m4-select",4),a.ac(9,"async"),a.Ob(),a.Pb(10,"div",1),a.Kb(11,"m4-date-picker",5),a.Ob(),a.Pb(12,"div",6),a.Pb(13,"button",7),a.Xb("click",(function(){return t.save()})),a.sc(14,"Create"),a.Ob(),a.Ob(),a.Ob()),2&e&&(a.zb(2),a.fc("formGroup",t.form),a.zb(6),a.fc("ngIf",a.bc(9,3,t.users$)),a.zb(5),a.fc("disabled",t.form.invalid||t.form.pristine))},directives:[d.j,d.f,u.c,d.i,d.d,u.h,i.l,u.b,u.a,u.f,i.k,d.l,d.o],pipes:[i.b],styles:[""]}),_)},{path:"**",pathMatch:"full",redirectTo:"list"}],T=((j=function e(){_classCallCheck(this,e)}).\u0275mod=a.Hb({type:j}),j.\u0275inj=a.Gb({factory:function(e){return new(e||j)},imports:[[o.e.forChild(A)],o.e]}),j),$=((k=function e(){_classCallCheck(this,e)}).\u0275mod=a.Hb({type:k}),k.\u0275inj=a.Gb({factory:function(e){return new(e||k)},imports:[[i.c,T,u.d]]}),k)}}]);